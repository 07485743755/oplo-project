{"name":"Validate auth status","id":"health-check:Validate auth status","testSteps":[{"number":1,"description":"When User select env \"api-sit\" and enter clientId \"postman\" clientSecret \"38a9d0c1-46b3-4b14-9f06-86a7da7eebb6\" and grantType \"client_credentials\"","duration":172,"startTime":"2021-10-10T15:36:52.661+01:00[Europe/London]","result":"SUCCESS","precondition":false,"children":[{"number":2,"description":"Get access token: api-sit, postman, 38a9d0c1-46b3-4b14-9f06-86a7da7eebb6, client_credentials","duration":141,"startTime":"2021-10-10T15:36:52.677+01:00[Europe/London]","result":"SUCCESS","precondition":false,"children":[{"number":3,"description":"Create Access Token with apiRealm: api-sit, clientId :postman, clientSecret:38a9d0c1-46b3-4b14-9f06-86a7da7eebb6, grantType:client_credentials","duration":141,"startTime":"2021-10-10T15:36:52.677+01:00[Europe/London]","result":"SUCCESS","precondition":false,"children":[{"number":4,"description":"POST https://auth.myoplo.io/auth/realms/api-sit/protocol/openid-connect/token\r\r","duration":0,"startTime":"2021-10-10T15:36:52.818+01:00[Europe/London]","result":"SUCCESS","restQuery":{"method":"POST","path":"https://auth.myoplo.io/auth/realms/api-sit/protocol/openid-connect/token\r\r","content":"\r","contentType":"null","requestHeaders":"Accept\u003d*/*\r\n\t\t\t\tContent-Type\u003dapplication/x-www-form-urlencoded; charset\u003dISO-8859-1\r\r","requestCookies":"\r\r","responseHeaders":"Date: Sun, 10 Oct 2021 14:36:53 GMT\nContent-Type: application/json\nContent-Length: 1377\nConnection: keep-alive\nCache-Control: no-store\nSet-Cookie: KC_RESTART\u003d; Version\u003d1; Expires\u003dThu, 01-Jan-1970 00:00:10 GMT; Max-Age\u003d0; Path\u003d/auth/realms/api-sit/; Secure; HttpOnly\nX-XSS-Protection: 1; mode\u003dblock\nPragma: no-cache\nX-Frame-Options: SAMEORIGIN\nReferrer-Policy: no-referrer\nStrict-Transport-Security: max-age\u003d31536000; includeSubDomains\nX-Content-Type-Options: nosniff\r","responseCookies":"KC_RESTART\u003d;Path\u003d/auth/realms/api-sit/;Max-Age\u003d0;Secure;HttpOnly;Expires\u003d1/1/70 12:00 AM;Version\u003d1\r","responseBody":"{\n    \"access_token\": \"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJZaFRYUndrSFdfMURUWVVyc2pKNVRWUU1Rb3RtQ0p5OGJPaGZYSFZMWVJrIn0.eyJleHAiOjE2MzM4NzY5MTMsImlhdCI6MTYzMzg3NjYxMywianRpIjoiNDU2NjIxZGYtZjZkZS00ZTc4LTlmOTEtOWIzMzI5ODg1MTg4IiwiaXNzIjoiaHR0cHM6Ly9hdXRoLm15b3Bsby5pby9hdXRoL3JlYWxtcy9hcGktc2l0IiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjJlZjYxYTE3LTFiNGItNDBiNi1hMDEzLTAzZDFjNWViZmFhYSIsInR5cCI6IkJlYXJlciIsImF6cCI6InBvc3RtYW4iLCJhY3IiOiIxIiwiYWxsb3dlZC1vcmlnaW5zIjpbIioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIiwidW1hX2F1dGhvcml6YXRpb24iXX0sInJlc291cmNlX2FjY2VzcyI6eyJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiLCJ2aWV3LXByb2ZpbGUiXX19LCJzY29wZSI6InByb2ZpbGUgZW1haWwiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImNsaWVudEhvc3QiOiI5MC4xOTYuMTE3LjIyOCIsImNsaWVudElkIjoicG9zdG1hbiIsInByZWZlcnJlZF91c2VybmFtZSI6InNlcnZpY2UtYWNjb3VudC1wb3N0bWFuIiwiY2xpZW50QWRkcmVzcyI6IjkwLjE5Ni4xMTcuMjI4In0.He2FVPAMpLH8LgILBlYh31bUgwaT8EqvN0nnbcq9ROvx_UMFMB3prvI7eyZUtFK8_mqz-In9uCv5iiPVpawScf2C3I-hpRfrxI6BqaioHNyb6MQxFiNAji3cQmyfReeNTbV4MSk7MOe0SBnzzBchi_GU_B9ynWW9N1ahPQRGUhTm3-e5VwhMnFQNw7b4RPQcyvcTIQcGS_C_XEA3A0yvSEvVLnGB0PycwuYERY6XrhyLc_GA_Di5evkYaCPO4gw2gnQyAhlwxUo5d9UtFonkJRVCGgGsVx9ZfGVsMXdwN66u_zUszZaLE7YesCniHXVsDOMrI-9LZbqu3ZgV2owedA\",\n    \"expires_in\": 300,\n    \"refresh_expires_in\": 0,\n    \"token_type\": \"Bearer\",\n    \"not-before-policy\": 0,\n    \"scope\": \"profile email\"\n}","statusCode":200},"precondition":false}]}]}]},{"number":5,"description":"And Send request to broker with access token","duration":500,"startTime":"2021-10-10T15:36:52.833+01:00[Europe/London]","result":"SUCCESS","precondition":false,"children":[{"number":6,"description":"Check auth status: eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJZaFRYUndrSFdfMURUWVVyc2pKNVRWUU1Rb3RtQ0p5OGJPaGZYSFZMWVJrIn0.eyJleHAiOjE2MzM4NzY5MTMsImlhdCI6MTYzMzg3NjYxMywianRpIjoiNDU2NjIxZGYtZjZkZS00ZTc4LTlmOTEtOWIzMzI5ODg1MTg4IiwiaXNzIjoiaHR0cHM6Ly9hdXRoLm15b3Bsby5pby9hdXRoL3JlYWxtcy9hcGktc2l0IiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjJlZjYxYTE3LTFiNGItNDBiNi1hMDEzLTAzZDFjNWViZmFhYSIsInR5cCI6IkJlYXJlciIsImF6cCI6InBvc3RtYW4iLCJhY3IiOiIxIiwiYWxsb3dlZC1vcmlnaW5zIjpbIioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIiwidW1hX2F1dGhvcml6YXRpb24iXX0sInJlc291cmNlX2FjY2VzcyI6eyJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiLCJ2aWV3LXByb2ZpbGUiXX19LCJzY29wZSI6InByb2ZpbGUgZW1haWwiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImNsaWVudEhvc3QiOiI5MC4xOTYuMTE3LjIyOCIsImNsaWVudElkIjoicG9zdG1hbiIsInByZWZlcnJlZF91c2VybmFtZSI6InNlcnZpY2UtYWNjb3VudC1wb3N0bWFuIiwiY2xpZW50QWRkcmVzcyI6IjkwLjE5Ni4xMTcuMjI4In0.He2FVPAMpLH8LgILBlYh31bUgwaT8EqvN0nnbcq9ROvx_UMFMB3prvI7eyZUtFK8_mqz-In9uCv5iiPVpawScf2C3I-hpRfrxI6BqaioHNyb6MQxFiNAji3cQmyfReeNTbV4MSk7MOe0SBnzzBchi_GU_B9ynWW9N1ahPQRGUhTm3-e5VwhMnFQNw7b4RPQcyvcTIQcGS_C_XEA3A0yvSEvVLnGB0PycwuYERY6XrhyLc_GA_Di5evkYaCPO4gw2gnQyAhlwxUo5d9UtFonkJRVCGgGsVx9ZfGVsMXdwN66u_zUszZaLE7YesCniHXVsDOMrI-9LZbqu3ZgV2owedA","duration":500,"startTime":"2021-10-10T15:36:52.833+01:00[Europe/London]","result":"SUCCESS","precondition":false,"children":[{"number":7,"description":"Check auth status: eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJZaFRYUndrSFdfMURUWVVyc2pKNVRWUU1Rb3RtQ0p5OGJPaGZYSFZMWVJrIn0.eyJleHAiOjE2MzM4NzY5MTMsImlhdCI6MTYzMzg3NjYxMywianRpIjoiNDU2NjIxZGYtZjZkZS00ZTc4LTlmOTEtOWIzMzI5ODg1MTg4IiwiaXNzIjoiaHR0cHM6Ly9hdXRoLm15b3Bsby5pby9hdXRoL3JlYWxtcy9hcGktc2l0IiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjJlZjYxYTE3LTFiNGItNDBiNi1hMDEzLTAzZDFjNWViZmFhYSIsInR5cCI6IkJlYXJlciIsImF6cCI6InBvc3RtYW4iLCJhY3IiOiIxIiwiYWxsb3dlZC1vcmlnaW5zIjpbIioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIiwidW1hX2F1dGhvcml6YXRpb24iXX0sInJlc291cmNlX2FjY2VzcyI6eyJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiLCJ2aWV3LXByb2ZpbGUiXX19LCJzY29wZSI6InByb2ZpbGUgZW1haWwiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImNsaWVudEhvc3QiOiI5MC4xOTYuMTE3LjIyOCIsImNsaWVudElkIjoicG9zdG1hbiIsInByZWZlcnJlZF91c2VybmFtZSI6InNlcnZpY2UtYWNjb3VudC1wb3N0bWFuIiwiY2xpZW50QWRkcmVzcyI6IjkwLjE5Ni4xMTcuMjI4In0.He2FVPAMpLH8LgILBlYh31bUgwaT8EqvN0nnbcq9ROvx_UMFMB3prvI7eyZUtFK8_mqz-In9uCv5iiPVpawScf2C3I-hpRfrxI6BqaioHNyb6MQxFiNAji3cQmyfReeNTbV4MSk7MOe0SBnzzBchi_GU_B9ynWW9N1ahPQRGUhTm3-e5VwhMnFQNw7b4RPQcyvcTIQcGS_C_XEA3A0yvSEvVLnGB0PycwuYERY6XrhyLc_GA_Di5evkYaCPO4gw2gnQyAhlwxUo5d9UtFonkJRVCGgGsVx9ZfGVsMXdwN66u_zUszZaLE7YesCniHXVsDOMrI-9LZbqu3ZgV2owedA","duration":500,"startTime":"2021-10-10T15:36:52.833+01:00[Europe/London]","result":"SUCCESS","precondition":false,"children":[{"number":8,"description":"GET https://api.sit.myoplo.io/v1/broker/status\r\r","duration":0,"startTime":"2021-10-10T15:36:53.318+01:00[Europe/London]","result":"SUCCESS","restQuery":{"method":"GET","path":"https://api.sit.myoplo.io/v1/broker/status\r\r","content":"\r","contentType":"application/json","requestHeaders":"Authorization\u003dBearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJZaFRYUndrSFdfMURUWVVyc2pKNVRWUU1Rb3RtQ0p5OGJPaGZYSFZMWVJrIn0.eyJleHAiOjE2MzM4NzY5MTMsImlhdCI6MTYzMzg3NjYxMywianRpIjoiNDU2NjIxZGYtZjZkZS00ZTc4LTlmOTEtOWIzMzI5ODg1MTg4IiwiaXNzIjoiaHR0cHM6Ly9hdXRoLm15b3Bsby5pby9hdXRoL3JlYWxtcy9hcGktc2l0IiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjJlZjYxYTE3LTFiNGItNDBiNi1hMDEzLTAzZDFjNWViZmFhYSIsInR5cCI6IkJlYXJlciIsImF6cCI6InBvc3RtYW4iLCJhY3IiOiIxIiwiYWxsb3dlZC1vcmlnaW5zIjpbIioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIiwidW1hX2F1dGhvcml6YXRpb24iXX0sInJlc291cmNlX2FjY2VzcyI6eyJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiLCJ2aWV3LXByb2ZpbGUiXX19LCJzY29wZSI6InByb2ZpbGUgZW1haWwiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImNsaWVudEhvc3QiOiI5MC4xOTYuMTE3LjIyOCIsImNsaWVudElkIjoicG9zdG1hbiIsInByZWZlcnJlZF91c2VybmFtZSI6InNlcnZpY2UtYWNjb3VudC1wb3N0bWFuIiwiY2xpZW50QWRkcmVzcyI6IjkwLjE5Ni4xMTcuMjI4In0.He2FVPAMpLH8LgILBlYh31bUgwaT8EqvN0nnbcq9ROvx_UMFMB3prvI7eyZUtFK8_mqz-In9uCv5iiPVpawScf2C3I-hpRfrxI6BqaioHNyb6MQxFiNAji3cQmyfReeNTbV4MSk7MOe0SBnzzBchi_GU_B9ynWW9N1ahPQRGUhTm3-e5VwhMnFQNw7b4RPQcyvcTIQcGS_C_XEA3A0yvSEvVLnGB0PycwuYERY6XrhyLc_GA_Di5evkYaCPO4gw2gnQyAhlwxUo5d9UtFonkJRVCGgGsVx9ZfGVsMXdwN66u_zUszZaLE7YesCniHXVsDOMrI-9LZbqu3ZgV2owedA\r\n\t\t\t\tAccept\u003d*/*\r\n\t\t\t\tContent-Type\u003dapplication/json; charset\u003dUTF-8\r\r","requestCookies":"\r\r","responseHeaders":"Server: awselb/2.0\nDate: Sun, 10 Oct 2021 14:36:53 GMT\nContent-Type: text/html\nContent-Length: 118\nConnection: keep-alive\r","responseCookies":"\r","responseBody":"\u003chtml\u003e\n  \u003chead\u003e\n    \u003ctitle\u003e403 Forbidden\u003c/title\u003e\n  \u003c/head\u003e\n  \u003cbody\u003e\n    \u003ccenter\u003e\n      \u003ch1\u003e403 Forbidden\u003c/h1\u003e\n    \u003c/center\u003e\n  \u003c/body\u003e\n\u003c/html\u003e","statusCode":403},"precondition":false}]}]}]},{"number":9,"description":"Then Token is validate","duration":16,"startTime":"2021-10-10T15:36:53.333+01:00[Europe/London]","exception":{"errorType":"java.lang.AssertionError","message":"1 expectation failed.\nExpected status code \u003c200\u003e but was \u003c403\u003e.\n","stackTrace":[{"declaringClass":"io.restassured.internal.ResponseSpecificationImpl","methodName":"validateResponseIfRequired","fileName":"ResponseSpecificationImpl.groovy","lineNumber":636},{"declaringClass":"io.restassured.internal.ResponseSpecificationImpl","methodName":"statusCode","fileName":"ResponseSpecificationImpl.groovy","lineNumber":122},{"declaringClass":"io.restassured.internal.ResponseSpecificationImpl","methodName":"statusCode","fileName":"ResponseSpecificationImpl.groovy","lineNumber":130},{"declaringClass":"io.restassured.internal.ValidatableResponseOptionsImpl","methodName":"statusCode","fileName":"ValidatableResponseOptionsImpl.java","lineNumber":117},{"declaringClass":"co.oplo.cucumber.steps.MyStepdefs","methodName":"tokenIsValidate","fileName":"MyStepdefs.java","lineNumber":43},{"declaringClass":"✽","methodName":"Then Token is validate","fileName":"healthcheck.feature","lineNumber":10}]},"result":"FAILURE","precondition":false}],"userStory":{"id":"health-check","storyName":"Health Check","path":"healthcheck.feature","type":"feature"},"featureTag":{"name":"Health Check","type":"feature"},"title":"Validate auth status","description":"","tags":[{"name":"Health Check","type":"feature"}],"startTime":"2021-10-10T15:36:52.661+01:00[Europe/London]","duration":688,"testFailureCause":{"errorType":"java.lang.AssertionError","message":"1 expectation failed.\nExpected status code \u003c200\u003e but was \u003c403\u003e.\n","stackTrace":[{"declaringClass":"io.restassured.internal.ResponseSpecificationImpl","methodName":"validateResponseIfRequired","fileName":"ResponseSpecificationImpl.groovy","lineNumber":636},{"declaringClass":"io.restassured.internal.ResponseSpecificationImpl","methodName":"statusCode","fileName":"ResponseSpecificationImpl.groovy","lineNumber":122},{"declaringClass":"io.restassured.internal.ResponseSpecificationImpl","methodName":"statusCode","fileName":"ResponseSpecificationImpl.groovy","lineNumber":130},{"declaringClass":"io.restassured.internal.ValidatableResponseOptionsImpl","methodName":"statusCode","fileName":"ValidatableResponseOptionsImpl.java","lineNumber":117},{"declaringClass":"co.oplo.cucumber.steps.MyStepdefs","methodName":"tokenIsValidate","fileName":"MyStepdefs.java","lineNumber":43},{"declaringClass":"✽","methodName":"Then Token is validate","fileName":"healthcheck.feature","lineNumber":10}]},"testFailureClassname":"java.lang.AssertionError","testFailureMessage":"1 expectation failed.\nExpected status code \u003c200\u003e but was \u003c403\u003e.\n","testFailureSummary":"FAILURE;java.lang.AssertionError;1 expectation failed.\nExpected status code \u003c200\u003e but was \u003c403\u003e.\n;ResponseSpecificationImpl.groovy","projectKey":"","annotatedResult":"FAILURE","manual":false,"result":"FAILURE"}